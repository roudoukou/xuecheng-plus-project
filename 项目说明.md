
## 环境准备
IDEA 中的字符编码集都选择是UTF8

将解压的虚拟机进行赋值, 不选择移动

虚拟机账号密码 root / centos

mysql中的账号密码 root / mysql

gogs的账号密码 gogs / gogs

启动docker
```bash
systemctl start docker
sh /data/soft/restart.sh
```

将数据导入到数据库中, 使用代码生成器, 创建po类

添加swagger依赖 , 然后进行测试http://localhost:63040/content/swagger-ui.html

添加config的配置类, `LocalDateTimeConfig`, 将日期进行展示`yyyy-MM-dd HH:mm:ss`格式
"createDate": "2023-06-25 20:36:45",

拷贝代码生成器生成的mapper到service

创建数据字典表

使用 http client 插件进行接口测试

部署前端工程 和 系统管理服务

使用全局Cors过滤器, 解决前端工程的跨域问题

前端工程还没提交代码

编写mapper, 查询category树形结构类型的数据, 然后测试

自连接的sql语句
```sql
SELECT one.id, one.label, two.id, two.label
FROM course_category `one`
JOIN course_category two
ON two.parentid = one.id
WHERE one.parentid = '1'
AND one.is_show = '1'
AND two.is_show = '1'
ORDER BY one.orderby, two.orderby

WITH recursive t1 AS (
  SELECT 1 AS n
  UNION ALL
  SELECT n+1 FROM t1 WHERE n<5
)
SELECT * FROM t1

-- 向上递归
WITH recursive t1 AS (
  SELECT * FROM course_category WHERE id = '1'
  UNION ALL 
  SELECT t2.* FROM course_category t2 JOIN t1 ON t1.id = t2.parentid
)
SELECT * FROM t1 ORDER BY t1.id

-- 向上递归
WITH recursive t1 AS (
  SELECT * FROM course_category WHERE id = '1-1-1'
  UNION ALL
  SELECT t2.* FROM course_category t2 INNER JOIN t1 ON t1.parentid = t2.id
)
SELECT * FROM t1 ORDER BY t1.id
```

课程分类查询

## dev03

使用JSR303校验参数是否为空
在实体对象上添加注解 `@NotEmpty` , 然后再Controller接收参数使用`@Validated`激活
当增删改共用一个对象时, 还需要抛出不同的信息内容, 这时需要定义一个分组接口
注解内部 `@Validated` 需要指定下是用的哪个分组

```java
public CourseBaseInfoDto createCourseBase(
    @RequestBody @Validated(ValidationGroups.Insert.class) AddCourseDto addCourseDto){
    ...        
}
```

```java
/**
 * 校验分组
 */
public class ValidationGroups {

    public interface Insert{};
    public interface Update{};
    public interface Delete{};

}
```

修改课程, 先按照courseid查询出当前接口

## 关于mybatis
插入语句之后返回主键
首先数据库的主键要自动递增
然后再insert标签上添加`useGeneratedKeys="true" keyProperty="id"`
```xml
    <!--Integer addCourseTeacher(CourseTeacher courseTeacher);-->
    <insert id="addCourseTeacher" useGeneratedKeys="true" keyProperty="id">
        insert into course_teacher(course_id,
                                   teacher_name,
                                   position,
                                   introduction)
        values(#{courseId},
               #{teacherName},
               #{position},
               #{introduction})
    </insert>
```

插入之后, 主键返回在传入的对象当中
```java
        Integer integer = courseTeacherMapper.addCourseTeacher(courseTeacher);
        // 影响的行数
        System.out.println("integer = " + integer);
        // 返回的主键
        System.out.println(courseTeacher.getId());
```

### 各种返回值
insert：插入n条记录，返回影响行数n。（n>=1，n为0时实际为插入失败）
update：更新n条记录，返回影响行数n。（n>=0）
delete：删除n条记录，返回影响行数n。（n>=0）
参考: https://www.cnblogs.com/aspirant/p/12213428.html

待完成: 通过远程调用传入字典值, 获取code